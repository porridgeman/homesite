extends layout

block content
	h1 #{title}

	script.
		$(function() {
			var hidden = true;
			$("button#remove").hide();
			$("form#links").hide();
			$("button#edit").click(function() {
				if (hidden) {
					$("button#remove").show();
					$("form#links").show();
					hidden = false;
					$("button#edit").html("View");
				} else {
					$("button#remove").hide();
					$("form#links").hide();
					hidden = true;
					$("button#edit").html("Edit");				
				}
			});
			$("button#remove").click(function() {
				//var a = $(this).parent().children('a');
				//$(this).parent().append(a.attr('href')).append(a.contents());

				//var index = $(this).parent().index('p');
				//$(this).parent().append(index);
			});
		});

	.container
		.left-list
			button#edit() Edit

			h3 Links:

			each link in links
				p.link
					a.link(href='#{link.url}', target='_blank') #{link.label}
					button#remove() X

			form#links(name="addLink", action="/pages/#{name}", method="post")
				input(type="text", name="label", placeholder="Label");
				input(type="text", name="url", placeholder="URL");
				input(type="submit", name="addLink", value="Add Link");

		.right-list
			h3 Pages:

			each page in pages
				p.link
					a.link(href='/pages/#{page.name}', target='_blank') #{page.title}

			form(name="addPage", action="/pages/#{name}", method="post")
				input(type="text", name="name", placeholder="Name");
				input(type="text", name="title", placeholder="Title");
				input(type="submit", name="addPage", value="Add Page");

